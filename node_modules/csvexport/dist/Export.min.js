"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();!function(){var e=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?",":arguments[0],n=arguments.length<=1||void 0===arguments[1]?"text/csv":arguments[1];_classCallCheck(this,e),this._delimiter=t,this._contentType=n,this._rows=[[]]}return _createClass(e,[{key:"_quote",value:function(e){return'"'+e.replace(/"/g,'""')+'"'}},{key:"writeValue",value:function(e){var t=void 0===e?"":String(e),n=t.indexOf(this._delimiter)!==-1||/"\r\n/.test(t);this._currentRow.push(n?this._quote(t):t)}},{key:"writeLine",value:function(){this._rows.push([])}},{key:"toString",value:function(){var e=this;return this._rows.map(function(t){return t.join(e._delimiter)}).reduce(function(e,t){return e+"\r\n"+t})}},{key:"toBlob",value:function(){return new Blob([this.toString()],{type:this._contentType})}},{key:"_currentRow",get:function(){return this._rows[this._rows.length-1]}}]),e}(),t=function(){function t(e){_classCallCheck(this,t),this._options=e||{}}return _createClass(t,[{key:"_createCsvBlob",value:function(t){var n=this._options.delimeter||",",o=this._options.contentType||"text/csv",r=this._options.headers||{},i=this._options.formatters||{},a=this._options.includeHeaders,s=function(e){return i[e]||function(e){return e}},u=new e(n,o),c=this._options.columns||Object.getOwnPropertyNames(t[0]);return(void 0===a||a)&&(c.forEach(function(e){return u.writeValue(r[e]||e)}),u.writeLine()),t.forEach(function(e){c.forEach(function(t){return u.writeValue(s(t)(e[t]))}),u.writeLine()}),u.toBlob()}},{key:"_download",value:function(e,t){if(navigator.msSaveBlob)return void navigator.msSaveBlob(e,t);var n=document.createElement("A"),o=URL.createObjectURL(e);n.href=o,n.download=t,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"downloadCsv",value:function(e){try{console.info("Generating CSV download");var t=this._createCsvBlob(e),n=this._options.filename||"export.csv";this._download(t,n)}catch(o){alert("Unable to create export: "+o.message),console.error(o)}}}],[{key:"create",value:function(e){return new t(e)}},{key:"download",value:function(e){return(new t).downloadCsv(e)}}]),t}();window.Export=t}();